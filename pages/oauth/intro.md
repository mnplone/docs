
# OAuth

## Диалог авторизации

Для авторизации пользователя в вашем приложении перенаправьте его по адресу `https://monopoly-one.com/oauth`, передав в `query` (`searchParams`) следующие параметры:

<<< PARAMETERS
app_id: uint
Идентификатор вашего приложения.
<<<
scope: uint = 0
[Битовая маска прав](/oauth/scopes), которые вы запрашиваете у пользователя. По умолчанию вы получаете доступ только к тем методам API, которые при авторизации разрешают только не указывать параметр user_id (например, [users.get](/api/http/users.get) или [inventory.get](/api/http/inventory.get)).
<<<
redirect_uri: string
Адрес, по которому надо перенаправить пользователя после принятия им решения о предоставлении доступа.
Домен адреса должен совпадать с доменом, указанным в настройках приложения.
Специальное значение `blank` перенаправит пользователя по адресу `https://monopoly-one.com/oauth/blank`.
<<<
response_type: string
Тип авторизации, который вы запрашиваете:
`access_token` — если вы хотите делать запросы из браузера клиента;
`code` — если вы хотите делать запросы со своего сервера.
<<<

## Implicit Flow

С помощью Implicit Flow вы сможете делать запросы к API непосредственно с устройства пользователя (из браузера или приложения). Для авторизации перенаправьте пользователя на страницу авторизации, передав параметр `response_type=access_token`.

После принятия пользователем решения о предоставления доступа он будет перенаправлен по адресу из параметра `redirect_uri`. Данные от Monopoly One будут переданы в `hash` этого адреса в формате [x-www-form-urlencoded](https://ru.wikipedia.org/wiki/POST_(HTTP)#Использование_для_представления_веб-форм).

В случае **предоставления доступа** будет передана информация о [сессии](/objects/Session), при этом `access_token` будет привязан к IP адресу пользователя. В ином случае будет передан параметр `error` с описанием ошибки.

## Authorization Code Flow

С помощью Authorization Code Flow вы сможете делать запросы к API со своего сервера. Для авторизации перенаправьте пользователя на страницу авторизации, передав параметр `response_type=code`.

После принятия пользователем решения о предоставления доступа он будет перенаправлен по адресу из параметра `redirect_uri`. Данные от Monopoly One будут переданы в `query` (`searchParams`) этого адреса.

В случае **предоставления доступа** будет передан параметр `code`, который надо будет **со стороны сервера** обменять на сессию через метод [oauth.exchageCode](/api/http/oauth.exchageCode). В ином случае будет передан параметр `error` с описанием ошибки.
