
# Объект `GchatMessage`

Тип `dictionary<string, any?>`.

Описывает сообщение в общем чатe.

## Общие параметры

<<< PARAMETERS
msg_id: string
Идентификатор сообщения.
<<<
ts: uint
Время создания сообщения.
<<<
type: uint
Тип сообщения:
`1`: сообщение пользователя;
`2`: уведомление о выпавшем предмете;
`3`: уведомление о предмете, выданном из коробки подарков;
`4`: уведомление об активации промокода.
<<<

## Дополнительные параметры

### Сообщение пользователя (`type=1`)

<<< PARAMETERS
user_id: uint
Идентификатор пользователя, отправившего сообщение.
<<<
is_public: bit?
Если `1`, то сообщение является публичным. По умолчанию публичность сообщения определяется по алгоритму, указанному в конце статьи.
<<<
user_ids_mentioned: list<uint>?
Идентификаторы пользователей, упомянутых в сообщении.
<<<

### Уведомление о выпавшем предмете (`type=2`)

<<< PARAMETERS
user_id: uint
Идентификатор пользователя, открывшего кейс или подарочный набор.
<<<
case_item_proto_id: uint
Идентификатор прототипа кейса или подарочного набора, который открыл пользователь.
<<<
drop_item_proto_id: uint
Идентификатор прототипа предмета, который выпал пользователю из кейса или подарочного набора.
<<<

### Уведомление о предмете, выданном из коробки подарков (`type=3`)

<<< PARAMETERS
user_id: uint
Идентификатор пользователя, открывшего коробку подарков.
<<<
user_id_receiver: uint
Идентификатор пользователя, получившего предмет.
<<<
item_proto_id: uint
Идентификатор прототипа предмета, который выпал из коробки подарков.
<<<

### Уведомление об активации промокода (`type=3`)

<<< PARAMETERS
user_id: uint
Идентификатор пользователя, активировавшего промокод.
<<<
item_proto_ids: list<uint>
Идентификаторы прототипов предметов, которые получил пользователь.
<<<

## Определение публичности сообщения общего чата

Сообщение является публичным, если:
- параметр `is_public` равен `1` *или*
- автор сообщения не бот *или*
- в сообщении нет упоминаний пользователей.

Иные сообщения будут показаны только тем пользователям, которые упомянуты в сообщении.

<aside warning>

«Непубличные» сообщения в общем чате никак не закрыты приватностью и доступны для чтения всем желающим через API или консоль браузера. Не передавайте таким образом никакую приватную информацию!

</aside>
