
# HTTP API Monopoly One

## Запросы

Запросы к API строятся следующим образом:

- метод HTTP: **GET**, **POST**;
- URL: `https://monopoly-one.com/api/<method_name>`.

Ответы сервер присылает в формате JSON. Схема ответа:

<<< PARAMETERS
code: uint
Код ответа. Если `0`, то запрос успешен, если нет, то произошла ошибка.
<<<
data: list<any>? | dictionary<string, any>?
Параметры ответа метода API.
<<<
description: string?
Текстовое описание ошибки.
<<<

## Авторизация

Авторизация при выполнении запроса обеспечивается передачей параметра `access_token`.

**Чаще всего** `access_token` ограничен по времени жизни и **всегда** привязан к IP-адресу, на который он был выдан.

Также у нас имеется система рефреш-токенов (параметр `refresh_token`), при помощи которых вы сможете получить новый `access_token` взамен истёкшего или при смене IP-адреса. Узнать подробнее о процедуре обновления токена вы можете в методе API [auth.refresh](/api/http/auth.refresh).

## Глобальные коды ошибок

<%- include('../../../includes/errors/head.md') -%>
| **1** | Ошибка авторизации. |
| **2** | Не передан обязательный параметр или переданные параметры невалидны. |
| **3** | Внутренняя ошибка сервера. |
| **4** | Нет прав на выполнение этого запроса. |
| **5** | Вызван неизвестный метод API. |
| **6** | Превышено число запрашиваемых объектов. <br> <small>Максимальное число объектов, которые можно передать в один запрос — 50.</small> |
| **7** | Превышен лимит запросов. <br> В параметре `retry_after` может быть указано время до снятия лимита в секундах. |
| **8** | Требуется капча. |
| **10** | Сервер не может обработать запрос прямо сейчас. |
| **11** | Требуется подтверждение. <br> В параметре `text_id` будет указан код, объясняющий ошибку. Чаще всего этот код означает, что какое-то условие не может быть выполнено, например, невозможна выдача бонуса при покупке. <br> Запрос с добавлением параметра `force=1` будет означать, что вы согласны с условиями исполнения запроса. |
| **12** | Требуется ввод кода из аутентификатора. |
| **98** | Метод находится на технических работах и временно отключён. |
| **99** | Неизвестная ошибка. |

# MARK: Examples

## Ответ

Успешный запрос

```json
{
  "code": 0,
  "data": {
	"user_id": 1
  }
}
```

Ошибка авторизации

```json
{
  "code": 1,
  "description": "Authorization error."
}
```
